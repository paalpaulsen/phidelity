/* =========================================
   1. VARIABLES & ROOT
   ========================================= */
*,
*::before,
*::after {
    box-sizing: border-box;
}

img,
svg,
video {
    max-width: 100%;
    height: auto;
    display: block;
}

html {
    background-color: var(--mono-09);
    /* LEVEL 1: ROOT CONTAINER */
    container-type: inline-size;
    container-name: phi-root;
}

body {
    /* DEFAULT VARIABLES (Mobile First) */
    --phi: 1.618033988;

    /* MODULAR SCALES */
    --scale-up: 1.309;
    /* Mobile: Moderate growth */
    --scale-down: 1.309;
    /* Mobile: Moderate shrink */

    --nav-width: 362px;
    --header-height: 60px;
    --font-sans: 'Inter', sans-serif;
    --font-serif: 'DM Serif Display', serif;

    /* TYPOGRAPHY SCALES */
    --type-base: 1.0618rem;
    --tracking-heading: 0.02em;
    --tracking-base: 0em;

    /* Leading: Golden Ratio for Body */
    --leading-base: 1.618;
    /* Headings will use tighter line-heights manually */

    /* H3 = Base * Scale Up (Fluid) */
    --type-h3: calc(var(--type-base) * var(--scale-up));

    /* H2 = Base * Scale Up^2 */
    --type-h2: calc(var(--type-base) * var(--scale-up) * var(--scale-up));

    /* H1 Standard/Small */
    --type-h1-s: calc(var(--type-base) * var(--scale-up) * var(--scale-up));

    /* H1 Medium */
    --type-h1-m: calc(var(--type-base) * var(--scale-up) * var(--scale-up) * var(--scale-up));

    /* H1 Large */
    --type-h1-l: calc(var(--type-base) * var(--scale-up) * var(--scale-up) * var(--scale-up) * var(--scale-up));

    /* Default H1 mapping */
    --type-h1: var(--type-h1-m);

    /* Display Sizes mapping */
    --type-display-med: var(--type-h1-m);
    --type-display-lg: var(--type-h1-l);

    /* Summary L: Base * Scale Up (Not Down) */
    --type-summary-l: calc(var(--type-base) * var(--scale-up));

    /* DOWNSCALING (Captions, Micro) - Uses Scale Down */
    --type-caption: calc(var(--type-base) / var(--scale-down));
    --type-micro: calc(var(--type-caption) / var(--scale-down));

    /* --- COLOR DEFINITIONS (Strict Phi Palette) --- */

    /* 1. MONOCHROME (1-10) */
    --mono-01: #000000;
    --mono-02: #0E0E0E;
    --mono-03: #252525;
    --mono-04: #3C3C3C;
    --mono-05: #616161;
    --mono-06: #9E9E9E;
    --mono-07: #C3C3C3;
    --mono-08: #DADADA;
    --mono-09: #F1F1F1;
    --mono-10: #FFFFFF;

    /* 2. PHI GREEN (1-12) */
    --green-01: #002500;
    --green-02: #003C00;
    --green-03: #009E00;
    --green-04: #00C300;
    --green-05: #00DA00;
    --green-06: #00F100;
    --green-07: #00FF00;
    --green-08: #00FF61;
    --green-09: #61FF9E;
    --green-10: #9EFFC3;
    --green-11: #C3FFDA;
    --green-12: #DAFFF1;

    /* 3. PHI BLUE (1-14) */
    --blue-01: #00003C;
    --blue-02: #000061;
    --blue-03: #000E9E;
    --blue-04: #000EC3;
    --blue-05: #003CC3;
    --blue-06: #0061DA;
    --blue-07: #009EFF;
    --blue-08: #00C3FF;
    --blue-09: #00DAFF;
    --blue-10: #3CFFFF;
    --blue-11: #61FFFF;
    --blue-12: #9EFFFF;
    --blue-13: #C3FFFF;
    --blue-14: #DAFFFF;

    /* 4. PHI PURPLE (1-8) */
    --purple-01: #250E3C;
    --purple-02: #3C0061;
    --purple-03: #61009E;
    --purple-04: #9E3CC3;
    --purple-05: #9E61C3;
    --purple-06: #C39EFF;
    --purple-07: #DAC3FF;
    --purple-08: #F1F1FF;

    /* 5. PHI MAGENTA (1-10) */
    --magenta-01: #3C003C;
    --magenta-02: #610061;
    --magenta-03: #9E009E;
    --magenta-04: #C300C3;
    --magenta-05: #DA00DA;
    --magenta-06: #F100F1;
    --magenta-07: #FF61FF;
    --magenta-08: #FF9EFF;
    --magenta-09: #FFDAFF;
    --magenta-10: #FFF1FF;

    /* 6. PHI RED (1-12) */
    --red-01: #250000;
    --red-02: #3C0000;
    --red-03: #610000;
    --red-04: #9E0000;
    --red-05: #DA0000;
    --red-06: #FF0000;
    --red-07: #FF3C3C;
    --red-08: #FF6161;
    --red-09: #FF9E9E;
    --red-10: #FFC3C3;
    --red-11: #FFDADA;
    --red-12: #FFF1F1;

    /* 7. PHI EARTH (1-10) */
    --earth-01: #250E0E;
    --earth-02: #3C250E;
    --earth-03: #613C25;
    --earth-04: #9E613C;
    --earth-05: #FF9E61;
    --earth-06: #FFC39E;
    --earth-07: #FFDAC3;
    --earth-08: #FFF1DA;
    --earth-09: #FFFFDA;
    --earth-10: #FFFFF1;

    /* 8. PHI SOLAR (1-12) */
    --solar-01: #F12500;
    --solar-02: #F13C00;
    --solar-03: #F16100;
    --solar-04: #FF9E00;
    --solar-05: #FFC300;
    --solar-06: #FFDA00;
    --solar-07: #FFF100;
    --solar-08: #FFFF61;
    --solar-09: #FFFF9E;
    --solar-10: #FFFFC3;
    --solar-11: #FFFFDA;
    --solar-12: #FFFFF1;

    /* UI MAPPINGS */
    --c-bg: var(--mono-10);
    --c-text: var(--mono-03);
    --c-text-muted: var(--mono-06);
    --c-border: var(--mono-04);
    --c-border-light: var(--mono-08);
    --c-nav-bg: var(--mono-09);
    --c-hover: var(--mono-10);
    --c-zone-bg: var(--mono-10);
    /* Updated to White per user request */

    /* LAYOUT CONTROLLER */
    --max-width: 3840px;
    --radius-base: 0px;

    /* BODY LAYOUT */
    margin: 0 auto;
    /* Centered */
    padding: 0;
    display: grid;
    grid-template-rows: var(--header-height) 1fr var(--header-height);

    max-width: var(--max-width);
    width: 100%;

    background-color: var(--c-bg);
    color: var(--c-text);
    font-family: var(--font-sans);
    font-size: var(--type-base);
    line-height: var(--leading-base);
    font-weight: 300;
    /* Inter Regular */
    box-shadow: 0 0 25px rgba(0, 0, 0, 0.1);
}

* {
    box-sizing: border-box;
}

/* =========================================
   2. BASE STYLES
   ========================================= */

p {
    margin: 0 0 1rem 0;
    font-weight: 300;
    letter-spacing: var(--tracking-base);
}

/* HEADERS: DM Serif Display */
h1,
h2 {
    margin: 0 0 1rem 0;
    font-family: var(--font-serif);
    font-weight: 400;
    /* DM Serif Display is typically 400 */
    letter-spacing: var(--tracking-heading);
}

h1 {
    font-size: var(--type-h1);
    line-height: 1.1;
    letter-spacing: var(--tracking-heading);
}

h2 {
    font-size: var(--type-h2);
    line-height: 1.2;
}

/* H3 can stay Sans or Serif depending on preference, keeping Serif for consistency with headers */
h3 {
    font-family: var(--font-sans);
    font-size: var(--type-base);
    /* Matches P size */
    line-height: 1.3;
    font-weight: 700;
    /* Bolder */
    margin: 2rem 0 0.5rem 0;
    letter-spacing: var(--tracking-heading);

    /* Keep title with text */
    /* Keep title with text */
    break-after: avoid;
    break-inside: avoid;
    -webkit-column-break-after: avoid;
    /* Safari/WebKit Legacy */
    page-break-after: avoid;
    orphans: 3;
}

/* Force adjacent paragraph to stick to H3 */
h3+p {
    break-before: avoid;
    -webkit-column-break-before: avoid;
}

/* LEAD / SUMMARY TEXT */
.lead {
    font-family: var(--font-sans);
    font-size: var(--type-summary-l);
    font-weight: 300;
    /* Inter Light for elegance */
    line-height: 1.5;
    color: var(--c-text);
    max-width: 65ch;
    /* Optimal reading length */
}

.type-display-lg {
    font-family: var(--font-serif);
    font-size: var(--type-display-lg);
    line-height: 1.05;
    font-weight: 400;
    letter-spacing: -0.04em;
    margin-bottom: 1rem;
}

.type-display-med {
    font-family: var(--font-serif);
    font-size: var(--type-display-med);
    line-height: 1.05;
    font-weight: 400;
    letter-spacing: -0.03em;
    margin-bottom: 1rem;
}

.summary-l {
    font-family: var(--font-sans);
    font-size: var(--type-summary-l);
    font-weight: 300;
    line-height: 1.5;
    color: var(--c-text);
}

.summary-s {
    font-family: var(--font-sans);
    font-size: var(--type-base);
    font-weight: 300;
    line-height: 1.5;
    color: var(--c-text);
}

small {
    font-family: var(--font-sans);
    font-size: var(--type-caption);
    color: var(--c-text-muted);
    display: block;
    margin-bottom: 0.5rem;
}

.caption {
    font-family: var(--font-sans);
    font-size: var(--type-base);
    font-weight: 300;
    color: var(--mono-06);
    display: block;
    margin-bottom: 0.5rem;
    margin-top: 1rem;
}

.name {
    font-family: var(--font-sans);
    font-size: var(--type-base);
    font-weight: 700;
    color: var(--c-text);
    margin: 0;
}

.role {
    font-family: var(--font-sans);
    font-size: var(--type-base);
    font-weight: 300;
    color: var(--mono-05);
    margin: 0;
}

.type-micro {
    font-family: var(--font-sans);
    font-size: var(--type-micro);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 700;
}

.eyebrow-l {
    font-family: var(--font-sans);
    font-size: var(--type-base);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 300;
    line-height: 1.2;
}

.eyebrow-s {
    font-family: var(--font-sans);
    font-size: var(--type-micro);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-weight: 600;
    line-height: 1.2;
}

.zone {
    background: var(--c-zone-bg);
    /*   border: 1px solid var(--c-border); */
    min-height: 1em;
    /* Reduced from 300px to prevent gaps */

    /* Flex Container for Height Filling */
    display: flex;
    flex-direction: column;

    /* Container Query Context */
    container-type: inline-size;
    container-name: macro-zone;
}

/* UTILITY: Dark Zone (Matches mono-02 widgets, hides border) */
.zone.dark {
    background: var(--mono-02);
    border-color: var(--mono-02);
}

/* UTILITY: Dark Border Only */
.zone.border-dark {
    border-color: var(--mono-02);
}

/* =========================================
   3. APP SHELL
   ========================================= */

/* MAIN GRID */
.shell-body {
    display: grid;
    transition: grid-template-columns 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    overflow: hidden;
    position: relative;
    height: calc(100vh - 120px);
    /* Viewport - Header - Footer */
}

/* DESKTOP LOGIC (Container > 1000px) */
@container phi-root (min-width: 1000px) {
    body {
        /* Desktop: Aggressive growth upwards (Phi), Gentle shrink downwards (Half-step) */
        --scale-up: 1.618;
        --scale-down: 1.309;

        /* Re-calc variables that depend on scale-up (CSS vars don't auto-recalc if defined in body but logic is sound if these are just values) 
           Actually, since we defined --type-h3 as calc(--scale-up), updating --scale-up here WILL update the result. 
        */
    }

    /* APPLICATION MODE: Force Moderate Scale on Desktop */
    body.mode-app {
        --scale-up: 1.309;
        --scale-down: 1.309;
    }

    .shell-body {
        grid-template-columns: var(--nav-width) 1fr 0px;
    }

    phi-left-nav {
        border-right: 1px solid var(--c-border);
        border-left: 1px solid var(--c-border);
    }

    phi-right-nav {
        border-left: 1px solid var(--c-border);
        border-right: 1px solid var(--c-border);
        visibility: hidden;
        opacity: 0;
    }

    /* States */
    body.left-closed .shell-body {
        grid-template-columns: 0px 1fr 0px;
    }

    body.left-closed phi-left-nav {
        visibility: hidden;
        opacity: 0;
    }

    body.right-open .shell-body {
        grid-template-columns: var(--nav-width) 1fr var(--nav-width);
    }

    body.right-open phi-right-nav {
        visibility: visible;
        opacity: 1;
    }

    body.left-closed.right-open .shell-body {
        grid-template-columns: 0px 1fr var(--nav-width);
    }
}

/* MOBILE LOGIC (Container < 1000px) */
@container phi-root (max-width: 999px) {
    .shell-body {
        display: block;
        position: relative;
        height: auto;
        min-height: calc(100vh - 120px);
    }

    phi-left-nav,
    phi-right-nav {
        position: fixed;
        top: var(--header-height);
        bottom: 0;
        width: 85%;
        max-width: 320px;
        z-index: 4000;
        background: var(--c-nav-bg);
        transition: transform 0.3s ease;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        visibility: hidden;
    }

    phi-left-nav {
        left: 0;
        border-right: 1px solid var(--c-border);
        transform: translateX(-100%);
    }

    phi-right-nav {
        right: 0;
        border-left: 1px solid var(--c-border);
        transform: translateX(100%);
    }

    body.mobile-left-open phi-left-nav {
        transform: translateX(0);
        visibility: visible;
    }

    body.mobile-right-open phi-right-nav {
        transform: translateX(0);
        visibility: visible;
    }

    /* Backdrop */
    body.mobile-left-open::after,
    body.mobile-right-open::after {
        content: '';
        position: fixed;
        top: var(--header-height);
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 3000;
        animation: fadeIn 0.3s forwards;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* =========================================
   4. ZONES (Content Slots)
   ========================================= */
.zone {
    background: var(--c-zone-bg);
    /* border: 1px solid var(--c-border); */
    min-height: 1em;
    /* Container Query Context */
    container-type: inline-size;
    container-name: macro-zone;
    content-visibility: auto;
}

/* UTILITY: Dark Zone */
.zone.dark {
    background: var(--mono-02);
    border-color: var(--mono-02);
}

/* UTILITY: Dark Border Only */
.zone.border-dark {
    border-color: var(--mono-02);
}